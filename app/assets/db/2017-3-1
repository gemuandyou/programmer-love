{
  "noteData": "<pre><span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@h1</span>-MongoDB分布式集群\n\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@h2</span>-mongo的安装\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@b</span>-mongo下载\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@tab</span>-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>-basis-@[&amp;gt; wget http://downloads.mongodb.org/linux/mongodb-linux-i686-2.4.9.tgz]@\n\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@b</span>-解压mongo\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@tab</span>-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>-basis-@[&amp;gt; tar -zxvf mongodb-linux-i686-2.4.9.tgz -C 指定目录]@\n\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@b</span>-配置环境变量\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@tab</span>-这里配置为用户级的环境变量。在~/profile中配置。\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>-basis-@[&amp;gt; vi ~/.profile]@\n在profile中添加如下内容：\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@tab</span>-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>-basis-@[PATH=$PATH:/home/gemu/Development/mongodb-linux-i686-2.4.9/bin\nexport PATH]@\n\n保存退出后执行如下命令使修改的环境变量生效：\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>-basis-@[&amp;gt; source ~/.profile]@\n\n设置mongo开机自动启动\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@tab</span>-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>-basis-@[&amp;gt; echo /usr/local/mongodb/bin/mongod --dbpath=/data/mongo/data --logpath=/data/mongo/dblogs--logappend --fork &gt;&gt; /etc/rc.local]@\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"edit-span\">@fc</span>-red-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>PS   echo 后使用\"&gt;\"表示清空原来内容，\"&gt;&gt;\"表示在原来内容后追加。\n\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@h2</span>-mongo启动\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@tab</span>-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>-basis-@[&amp;gt; mongod --dbpath ./data/ --logpath ./logs/log --logappend --fork]@\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@fbc</span>-yellow-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>dbpath 数据存储目录。<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@fbc</span>-yellow-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>logpath 日志存储目录。<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@fbc</span>-yellow-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>fork 后台运行，关闭控制台后依然运行。<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@fbc</span>-yellow-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>port 可是指定端口，默认是27017。<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@fbc</span>-yellow-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>logappend 每次日志在文件后追加。<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@fbc</span>-yellow-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>journal 用于故障恢复和持久化的日子。<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@fbc</span>-yellow-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>pidfilepath 指定进程文件的路径，如不指定，系统将不产生进程。<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@fbc</span>-yellow-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>maxConns 最大并发连接数。<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">@fbc</span>-yellow-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>nohttpinterface 关闭web控制台，http://192.168.255.128:28017/。\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>-basis-@[&amp;gt; mongod -f mongo.conf --fork]@\n以配置文件方式启动，就是将dbpath、logpath等配置到mongo.conf里。mongo.conf内容如下：\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@tab</span>-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>-basis-@[dbpath=/home/gemu/Development/mongodb-linux-i686-2.4.9/data\nlogpath=/home/gemu/Development/mongodb-linux-i686-2.4.9/logs/log\nlogappend=true]@\n\n\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@h2</span>-mongoDB的<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@url</span>-[https://docs.mongodb.com/manual/replication/]Replication\n一个副本集（replica set）是一组处理相同数据集的mongod实例。它包含了仅一个主节点（primary node）, 一堆从节点（secondary nodes），还有一个仲裁节点（arbiter node）。\n主节点（primary node）接收所有写操作，并且只有主节点能执行写操作，但从节点可暂时（transiently）变成主节点。主节点记录所有对数据集的操作日志（<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@url</span>-[https://docs.mongodb.com/manual/core/replica-set-oplog/]Oplog）。\n\nsoon\n\n\n\n\n\n\n\n</pre>",
  "noteName": "2017-3-1",
  "tags": "MongoDB"
}