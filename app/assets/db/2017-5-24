{
  "noteData": "<pre><pre><pre><pre><span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@h1</span>-Angular2.0.0随笔 <span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"edit-span\">@hr</span>- \\\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@h2</span>-动态加载组件 <span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@url</span>-[https://medium.com/@tudorgergely/injecting-components-dynamically-in-angular-2-3d36594d49a0]参考链接\n动态加载组件主要使用了两个类。<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@fbc</span>-yellow-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>ComponentFactoryResolver  和<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@fbc</span>-yellow-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>ViewContainerRef  。它们都在angular/core包下。\n使用过程：\n首先，我们创建一个组件，如 <span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@b</span>-ModalBoxComponent ，表示模态框。\n然后，我们需要在 <span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@b</span>-NoteComponent  组件中使用这个模态框，但是需要点击一个按钮后动态加载进来。在 <span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@b</span>-NoteComponent  的构造器中写入如下代码：\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>--@[constructor(private componentFactoryResolver: ComponentFactoryResolver, private viewContainerRef: ViewContainerRef) {\n\tconst factory: ComponentFactory = this.componentFactoryResolver.resolveComponentFactory(ModalBoxComponent);\n\tconst compRef: ComponentRef = this.viewContainerRef.createComponent(factory);\n\tthis.compRef = compRef;\n}]@ 最后在我们使用的时候获取 <span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@b</span>-ComponentRef  实例，就可以调用 <span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@b</span>-ModalBoxComponent  中的属性和方法了。如：\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>--@[triggerModal(): void {\n\tthis.compRef.instance.openModal(); \n}]@ 这里的 <span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@b</span>-openModal()  方法是 <span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@b</span>-ModalBoxComponent 中的方法。\n如果此时运行，会发现如下错误：<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>-@fc-red-&gt;error -@[EXCEPTION: Uncaught (in promise): Error: Error in ./NotesComponent class NotesComponent_Host - inline template:0:0 caused by: No component factory found for ModalBoxComponent\nError: No component factory found for ModalBoxComponent]@ \\\n这时我们需要在 <span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@b</span>-NoteModule  中添加<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@fbc</span>-yellow-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>entryComponents:[ModalBoxComponent]。如下：\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>--@[@NgModule({\n    imports: [CommonModule, FormsModule],\n    <span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@fc</span>-red-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>entryComponents:&amp;nbsp;[ModalBoxComponent],\n     declarations: [\n        NotesComponent,\n        ModalBoxComponent\n    ]\n})\nexport class NotesModule {}]@ \\\netc</pre></pre></pre></pre>",
  "noteName": "2017-5-24",
  "tags": "Angular2.0.0"
}