{
  "noteData": "<pre><pre><pre><pre><pre><pre><pre><pre><pre><pre><pre><pre><pre><pre><pre><pre><pre><pre><pre><pre><pre><pre><pre><pre><pre><span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@h1</span>-ElasticSearch <span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@hr</span>- \\\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@h3</span>-已root身份运行抛出异常 <span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@url</span>-[http://www.cnblogs.com/yswenli/p/6397351.html]参考地址\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>-@fc-red-&gt;error -@[can not run elasticsearch as root]@ \\\nelasticsearch使用root用户启动就会出现这个问题。所以我们需要建个用户。\n命令如下：<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>--@[&gt; groupadd elsearch #添加一个组\n&gt; useradd es -g elsearch -p gemu #useradd 用户名 -g 组 -p 密码\n&gt; chown -R a+w /usr/bin/elasticsearch-5.4.0 #添加读写权限]@ \\\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@b</span>-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@fc</span>-red-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>PS:   如果不授予读写权限，就会出现一对访问权限问题。如：<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@fbc</span>-yellow-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>AccessDeniedException \n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@h3</span>-配置远程访问\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>--@[&gt; vi /usr/bin/elasticsearch-5.4.0/config/elasticsearch.yml]@ 修改如下内容：\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>--@[network.host: 0.0.0.0]@ \\\n启动后发现报错：\n<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>-@fc-red-&gt;error -@[ERROR: bootstrap checks failed\nmax file descriptors [4096] for elasticsearch process is too low, increase to at least [65536]\nmax virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]\n]@ \\\n对于<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>--@[max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]]@这个问题，我们可以修改<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@fbc</span>-yellow-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>/etc/sysctl.conf  ，在末尾添加<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@fbc</span>-yellow-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>vm.max_map_count=262144  来解决。\n对于<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@code</span>--@[max file descriptors [4096] for elasticsearch process is too low, increase to at least [65536]]@这个问题是由于Linux对进程进行了一些限制。可以使用<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@fbc</span>-yellow-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>ulimit&amp;nbsp;-Sn  和<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@fbc</span>-yellow-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>ulimit&amp;nbsp;-Hn  来查看软硬限制。\n我们可以修改<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"\">@fbc</span>-yellow-<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\">&gt;</span>/etc/security/limit.conf  文件来解决。添加如下格式的内容：<span style=\"font-style: italic; color: #00c0ff;\" contenteditable=\"false\" class=\"edit-span\">@code</span>--@[#格式：用户名 hard/soft nofile 大小\nes hard nofile 65536]@ \\\nso on</pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre>",
  "noteName": "2017-5-25",
  "tags": "Elasticsearch"
}